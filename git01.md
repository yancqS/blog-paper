---
title: progit 第一章读书笔记
date: '2024-09-22'
cover: 'https://img.up-4ever.site/20240302171921.jpg'
top_img: 'https://img.up-4ever.site/20240302171921.jpg'
tags:
  - Git
categories:
  - Git
abbrlink: f90b6cc
---

# git 简介

## 关于版本控制

版本控制是一种记录一个或若干文件内容变化，以便将来查阅特 定版本修订情况的系统。

- 本地版本控制系统，比如：RCS
- 集中化的版本控制系统（CVCS），解决不同系统开发者系统工作的问题，比如：CVCS、Subversion
  - 缺点：中央服务器单点故障会阻塞所有用户。
- 分布式版本控制系统（DVCS），比如：Git、Mercurial、Darcs。像这类系统，客户端并不只提取最新版本的文件快照， 而是把代码仓库完整地镜像下来，包括完整的历史记录。 这么一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本 地仓库恢复。 因为每一次的克隆操作，实际上都是一次对代码仓库的完整备份。

## Git 简史

Linux 内核开源项目有着为数众多的参与者。 绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的 繁琐事务上(1991-2002年间)。 到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。

到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区 免费使用 BitKeeper 的权力。 这就迫使 Linux 开源社区(特别是 Linux 的缔造者 Linus Torvalds)基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。 他们对新的系统制订了若干目标:

- 速度
- 简单的设计
- 对非线性开发模式的强力支持(允许成千上万个并行开发的分支)
- 完全分布式
- 有能力高效管理类似 Linux 内核一样的超大规模项目(速度和数据量)

## Git 是什么

Git 特性：

- 直接记录快照，而非比较差异
- 近乎所有操作都是在本地执行
- Git 保证完整性：Git 用以计算校验和的机制叫做 SHA-1 散列(hash，哈希)。 这是一个由 40 个十六进制字符(0-9 和 a-f)组 成的字符串，基于 Git 中文件的内容或目录结构计算出来。
- Git 一般只添加数据：执行的 Git 操作，几乎只往 Git 数据库中添加据。 你很难使用 Git 从数据库中删除数据，也就是说 Git 几乎不会执行任何可能导致文件不可恢复的操作。

三种状态

- 已修改：表示修改了文件，但还没保存到数据库中。

- 已暂存：表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。

- 已提交：表示数据已经安全地保存在本地数据库中。

这会让我们的 Git 项目拥有三个阶段:工作区、暂存区以及 Git 目录。

  ![1](http://img.up-4ever.site/20240923155955.png)

工作区是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。

暂存区是一个文件，保存了下次将要提交的文件列表信息，一般在 Git 仓库目录中。 按照 Git 的术语叫做“索引”，不过一般说法还是叫“暂存区”。

Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，复制的就是这里的数据。

基本的 Git 工作流程如下:

1. 在工作区中修改文件。
2. 将你想要下次提交的更改选择性地暂存，这样只会将更改的部分添加到暂存区。
3. 提交更新，找到暂存区的文件，将快照永久性存储到 Git 目录。

如果 Git 目录中保存着特定版本的文件，就属于**已提交**状态。 如果文件已修改并放入暂存区，就属于**已暂存**状 态。 如果自上次检出后，作了修改但还没有放到暂存区域，就是**已修改**状态。 

## Git 配置

既然已经在系统上安装了 Git，你会想要做几件事来定制你的 Git 环境。 每台计算机上只需要配置一次，程序升级时会保留配置信息。 你可以在任何时候再次通过运行命令来修改它们。Git 自带一个 git config 的工具来帮助设置控制 Git 外观和行为的配置变量。 这些变量存储在三个不同的位置:

1. /etc/gitconfig 文件: 包含系统上每一个用户及他们仓库的通用配置。 如果在执行 git config 时带上 --system 选项，那么它就会读写该文件中的配置变量。 (由于它是系统配置文件，因此你需要管理员或 超级用户权限来修改它。)
2. ~/.gitconfig 或 ~/.config/git/config 文件:只针对当前用户。 你可以传递 --global 选项让 Git 读写此文件，这会对你系统上**所有**的仓库生效。
3. 当前使用仓库的 Git 目录中的 config 文件(即 .git/config):针对该仓库。 你可以传递 --local 选 项让 Git 强制读写此文件，虽然默认情况下用的就是它。 (当然，你需要进入某个 Git 仓库中才能让该选项 生效。)

每一个级别会覆盖上一级别的配置，所以 .git/config 的配置变量会覆盖 /etc/gitconfig 中的配置变量。

可以通过以下命令查看所有的配置以及它们所在的文件:

```shell
git config --list --show-origin
```
